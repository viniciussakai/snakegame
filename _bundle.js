(()=>{"use strict";const t=document.getElementById("gameCanvas").getContext("2d"),e=new class{grid=[];rowSize=0;colSize=0;food={x:10,y:10};CELLSIZE=30;constructor({rows:t,collums:e}){for(let i=0;i<t;i++)this.grid.push(Array(e).fill("0"));this.generateFood()}getPixel({row:t,col:e}){return{x:30*e,y:30*t}}draw(t){this.grid.forEach(((e,i)=>{e.forEach(((e,o)=>{const{x:s,y:h}=this.getPixel({row:i,col:o});let d="";switch(e){case"f":d="rgb(163, 3, 75)";break;case"0":d="black";break;case"s":d="white";break;case"h":d="rgb(201, 197, 201)"}t.fillStyle=d,t.fillRect(s,h,this.CELLSIZE,this.CELLSIZE)}))}))}changeItem({row:t,col:e,item:i="0"}){this.grid[t-1][e-1]=i}generateFood(){const t=Math.floor(Math.random()*this.grid.length)+1,e=Math.floor(Math.random()*this.grid[0].length)+1;"0"==this.grid[t-1][e-1]?(this.food={x:e,y:t},this.changeItem({row:t,col:e,item:"f"})):this.generateFood()}}({rows:20,collums:20}),i=new class{constructor(){this.diesAudio=new Audio("./src/assets/snake-die.mp3"),this.eatAudio=new Audio("./src/assets/snake-eat.mp3")}playFood(){this.eatAudio.play()}playDies(){this.diesAudio.play()}},o=new class{velocity={x:1,y:0};head={x:2,y:1};body=[];tail={x:1,y:1};constructor(t,e){this.grid=t,this.audio=e}checkCollision(){return this.head.x<1||this.head.x>20||this.head.y<1||this.head.y>20||!!this.body.some((t=>t.x==this.head.x&&t.y==this.head.y))}checkFood(){this.head.x==this.grid.food.x&&this.head.y==this.grid.food.y&&(this.grid.changeItem({col:this.grid.food.x,row:this.grid.food.y}),this.grid.generateFood(),this.body.push({x:this.tail.x,y:this.tail.y}),this.audio.playFood())}update(){if(this.checkCollision())return this.audio.playDies(),!0;this.grid.changeItem({col:this.tail.x,row:this.tail.y}),this.grid.changeItem({col:this.head.x,row:this.head.y}),this.body.forEach((t=>{this.grid.changeItem({col:t.x,row:t.y,item:"0"})})),this.body[0]={x:this.head.x,y:this.head.y};let t=this.body[this.body.length-1];for(let t=this.body.length-1;t>0;t--)this.body[t]=this.body[t-1];return this.tail=t,this.head.x+=this.velocity.x,this.head.y+=this.velocity.y,this.grid.changeItem({col:this.head.x,row:this.head.y,item:"h"}),this.grid.changeItem({col:this.tail.x,row:this.tail.y,item:"s"}),this.body.forEach((t=>{this.grid.changeItem({col:t.x,row:t.y,item:"s"})})),this.checkFood(),!1}}(e,i),s=document.getElementById("score"),h=document.getElementById("restartButton");new class{constructor(t){document.addEventListener("keypress",(e=>{var i=e.key;"w"==i&&1!=t.velocity.y&&(t.velocity.x=0,t.velocity.y=-1),"s"==i&&-1!=t.velocity.y&&(t.velocity.x=0,t.velocity.y=1),"a"==i&&1!=t.velocity.x&&(t.velocity.x=-1,t.velocity.y=0),"d"==i&&-1!=t.velocity.x&&(t.velocity.x=1,t.velocity.y=0)}),!1)}}(o);const d=setInterval((()=>{(o.update()||(s.innerHTML="Score: "+100*(o.body.length-1),e.draw(t),0))&&(clearInterval(d),a())}),1e4/60),a=()=>{document.getElementById("itemTitle").innerHTML="Game Over",h.classList.remove("hide")};h.addEventListener("click",(()=>{location.reload()}))})();